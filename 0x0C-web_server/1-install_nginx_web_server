#!/usr/bin/env bash
# Update package lists
apt-get update

# Install Nginx
apt-get install -y nginx

# Create the index.html file with "Hello World!" content
echo "Hello World!" > /var/www/html/index.html

# Ensure Nginx is listening on port 80 and restart the service without using systemctl
service nginx start

# Ensure the firewall allows traffic on port 80
ufw allow 80/tcp

# Verify Nginx is running
if curl -s http://localhost | grep -q "Hello World!"; then
    echo "Nginx is serving the correct content."
else
    echo "Nginx is not serving the correct content."
    exit 1
fi
